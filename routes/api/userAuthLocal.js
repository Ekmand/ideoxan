/* ---------------------------------------------------------------------------------------------- */
/*                                             MODULES                                            */
/* ---------------------------------------------------------------------------------------------- */
/* --------------------------------------- Authentication --------------------------------------- */
const passport                  = require('passport')


/* ---------------------------------------------------------------------------------------------- */
/*                                         INITIALIZATION                                         */
/* ---------------------------------------------------------------------------------------------- */
/* ------------------------------------------ Endpoint ------------------------------------------ */
exports.route = 'user/auth/'


/* ---------------------------------------------------------------------------------------------- */
/*                                           CONTROLLER                                           */
/* ---------------------------------------------------------------------------------------------- */
exports.get = (req, res, next) => {
    try {
        const authenticationOptions = {
            successRedirect: '/app/home',
            failureRedirect: '/login',
            failureFlash: true,
            successFlash: false,
            session: true
        }
        passport.authenticate('local', authenticationOptions)(req, res, next)
    } catch (err) {
        next(err)
    }
}
